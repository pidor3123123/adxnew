# Настройка базы данных на Hostinger

## Шаг 1: Создание базы данных

1. Войдите в панель управления Hostinger (hPanel)
2. Перейдите в раздел **"Базы данных"** → **"MySQL Databases"**
3. Нажмите **"Создать новую базу данных"**
4. Заполните форму:
   - **Имя базы данных**: `adxfinance` (или другое имя на ваше усмотрение)
   - **Пользователь базы данных**: создайте нового пользователя или используйте существующего
   - **Пароль**: создайте надежный пароль
5. Нажмите **"Создать"**
6. **ВАЖНО**: Запишите следующие данные:
   - Имя базы данных (например: `u123456789_adxfinance`)
   - Имя пользователя (например: `u123456789_dbuser`)
   - Пароль
   - Хост (обычно `localhost`)

## Шаг 2: Импорт структуры базы данных

### Вариант A: Через phpMyAdmin (рекомендуется)

1. В панели Hostinger перейдите в **"Базы данных"** → **"phpMyAdmin"**
2. Выберите созданную базу данных из списка слева
3. Перейдите на вкладку **"Импорт"** (Import)
4. Нажмите **"Выбрать файл"** и выберите файл `database.sql` из папки проекта
5. Убедитесь, что:
   - Формат файла: **SQL**
   - Кодировка: **utf8mb4_unicode_ci** (если доступно)
6. Нажмите **"Вперёд"** (Go) внизу страницы
7. Дождитесь завершения импорта
8. Вы должны увидеть сообщение об успешном импорте

### Вариант B: Через командную строку (если есть доступ)

```bash
mysql -u ваш_пользователь -p имя_базы_данных < database.sql
```

## Шаг 3: Проверка импорта

После импорта проверьте, что созданы следующие таблицы:

- ✅ `markets` - Рынки
- ✅ `assets` - Активы (криптовалюты, акции, форекс, индексы)
- ✅ `users` - Пользователи
- ✅ `user_sessions` - Сессии пользователей
- ✅ `balances` - Балансы пользователей
- ✅ `orders` - Ордера
- ✅ `transactions` - Транзакции
- ✅ `watchlist` - Список наблюдения
- ✅ `price_alerts` - Ценовые алерты

### Как проверить:

1. В phpMyAdmin выберите вашу базу данных
2. Перейдите на вкладку **"Структура"** (Structure)
3. Убедитесь, что все таблицы присутствуют

## Шаг 4: Настройка переменных окружения

Создайте файл `.env` в корневой папке проекта (где находятся файлы) со следующим содержимым:

```env
# База данных MySQL
DB_HOST=localhost
DB_NAME=ваше_имя_базы_данных
DB_USER=ваш_пользователь_базы_данных
DB_PASS=ваш_пароль_базы_данных
DB_CHARSET=utf8mb4
```

**ВАЖНО**: 
- Замените значения на реальные данные из шага 1
- Файл `.env` должен быть в корне проекта (там же где `index.html`)
- Не загружайте `.env` в публичный доступ (он уже в `.gitignore`)

## Шаг 5: Проверка подключения

1. Загрузите файл `check_db.php` на сервер
2. Откройте в браузере: `https://ваш-домен.com/check_db.php`
3. Проверьте результаты:
   - ✅ Все проверки должны быть зелеными
   - ❌ Если есть ошибки - исправьте их согласно сообщениям

## Шаг 6: Удаление файла проверки

**ВАЖНО**: После успешной проверки **обязательно удалите** файл `check_db.php` с сервера!

Этот файл содержит информацию о конфигурации и не должен быть доступен публично.

## Решение проблем

### Ошибка: "Access denied for user"

- Проверьте правильность имени пользователя и пароля в `.env`
- Убедитесь, что пользователь имеет права на базу данных
- В Hostinger пользователь должен быть привязан к базе данных

### Ошибка: "Unknown database"

- Проверьте правильность имени базы данных в `.env`
- Убедитесь, что база данных создана
- Имя базы данных в Hostinger обычно начинается с префикса (например: `u123456789_`)

### Ошибка: "Table doesn't exist"

- Убедитесь, что файл `database.sql` импортирован полностью
- Проверьте в phpMyAdmin, что все таблицы созданы
- Попробуйте импортировать `database.sql` еще раз

### Ошибка подключения к localhost

- В Hostinger хост обычно `localhost`
- Если не работает, попробуйте IP адрес MySQL сервера (указан в панели Hostinger)

## Дополнительная информация

- **Размер базы данных**: После импорта база данных будет занимать примерно 50-100 KB
- **Резервное копирование**: Рекомендуется делать регулярные бэкапы через phpMyAdmin
- **Оптимизация**: Hostinger автоматически оптимизирует базы данных

## Поддержка

Если возникли проблемы:
1. Проверьте логи ошибок PHP (в панели Hostinger)
2. Убедитесь, что все шаги выполнены правильно
3. Обратитесь в поддержку Hostinger, если проблема с доступом к БД
