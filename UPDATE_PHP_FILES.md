# Инструкция по замене исправленных PHP файлов на Hostinger

## Исправленные файлы

Были исправлены следующие файлы для устранения ошибки JSON parsing:

1. **`api/auth.php`** - удалена лишняя закрывающая скобка, улучшена буферизация вывода
2. **`api/sync.php`** - добавлена буферизация вывода для предотвращения попадания предупреждений в JSON

## Где находятся файлы на Hostinger

На сервере Hostinger эти файлы находятся по пути:
```
public_html/api/auth.php
public_html/api/sync.php
```

## Способ 1: Замена через ZIP архив (Рекомендуется)

Если вы еще не загружали файлы на Hostinger или хотите обновить все:

1. Загрузите обновленный файл `adx-finance-hostinger.zip` на Hostinger
2. Распакуйте его в `public_html/`
3. Все файлы будут автоматически заменены

## Способ 2: Замена отдельных файлов через File Manager

Если нужно заменить только исправленные файлы:

1. Войдите в панель Hostinger (hPanel)
2. Перейдите в **"Файлы"** → **"File Manager"**
3. Откройте папку `public_html/api/`
4. Загрузите новые версии файлов:
   - `api/auth.php` → замените существующий файл
   - `api/sync.php` → замените существующий файл

**Откуда брать файлы:**
- Из папки `hostinger-deploy/api/` в вашем проекте
- Или из распакованного `adx-finance-hostinger.zip`

## Способ 3: Замена через FTP

Если используете FTP клиент (FileZilla, WinSCP и т.д.):

1. Подключитесь к серверу Hostinger по FTP
2. Перейдите в папку `/public_html/api/`
3. Загрузите файлы:
   - `hostinger-deploy/api/auth.php` → `/public_html/api/auth.php`
   - `hostinger-deploy/api/sync.php` → `/public_html/api/sync.php`
4. Замените существующие файлы

## Проверка после замены

После замены файлов:

1. Откройте `https://adx.finance/register.html`
2. Попробуйте зарегистрироваться
3. Ошибка "Unexpected non-whitespace character after JSON" должна исчезнуть

## Важно

- Убедитесь, что права доступа на файлы установлены правильно (644 для файлов)
- После замены проверьте, что сайт работает корректно
- Если используете кеш, очистите его

## Что было исправлено

### `api/auth.php`:
- ✅ Удалена лишняя закрывающая скобка `}` в конце файла (строка 651)
- ✅ Уже была буферизация вывода (`ob_start()` и `ob_end_clean()`)

### `api/sync.php`:
- ✅ Добавлена буферизация вывода (`ob_start()`) в начале файла
- ✅ Добавлен `ob_end_clean()` перед каждым `echo json_encode()`
- ✅ Добавлен `exit` после каждого `echo json_encode()`

Эти исправления гарантируют, что JSON ответы будут чистыми, без лишних символов или PHP предупреждений.
