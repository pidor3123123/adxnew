# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ API wallet.php

## –°–ø–æ—Å–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç `https://adx.finance`
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É (–µ—Å–ª–∏ –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã)
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12)
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã:

```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤
fetch('/api/wallet.php?action=balances&_t=' + Date.now(), {
    headers: {
        'Authorization': 'Bearer ' + (localStorage.getItem('auth_token') || '')
    }
})
.then(r => r.json())
.then(data => console.log('Balances:', data))
.catch(err => console.error('Error:', err));

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
fetch('/api/wallet.php?action=transactions&limit=10&_t=' + Date.now(), {
    headers: {
        'Authorization': 'Bearer ' + (localStorage.getItem('auth_token') || '')
    }
})
.then(r => r.json())
.then(data => console.log('Transactions:', data))
.catch(err => console.error('Error:', err));
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –£—Å–ø–µ—Ö: `{success: true, balances: [...], total_usd: ...}`
- –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: `{success: false, error: "Unauthorized"}`
- –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞: `{success: false, error: "...", version: "2.0.1"}`

### 2. –ß–µ—Ä–µ–∑ Network tab

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –∏ –∫–æ–Ω—Å–æ–ª—å (F12)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Network**
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É `wallet.html`
4. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `wallet.php` –≤ —Å–ø–∏—Å–∫–µ
5. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∑–∞–ø—Ä–æ—Å
6. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Response**

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- **Status:** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `200 OK` (–Ω–µ 500)
- **Content-Type:** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `application/json` (–Ω–µ `text/html`)
- **Response:** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π JSON

### 3. –ß–µ—Ä–µ–∑ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://adx.finance/test_wallet_simple.php?test=step2`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞–π–¥–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `https://adx.finance/test_wallet_simple.php?test=step6`
4. –ï—Å–ª–∏ –≤—Å–µ —à–∞–≥–∏ —É—Å–ø–µ—à–Ω—ã, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ wallet.php

### 4. –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É
2. –í–æ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç –≤ –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ (—á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω)
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∏–∑ localStorage:
   ```javascript
   localStorage.getItem('auth_token')
   ```
4. –û—Ç–∫—Ä–æ–π—Ç–µ URL:
   ```
   https://adx.finance/api/wallet.php?action=balances
   ```
   (–¥–æ–±–∞–≤—å—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization —á–µ—Ä–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ curl)

### 5. –ß–µ—Ä–µ–∑ curl (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ç–µ—Ä–º–∏–Ω–∞–ª—É)

```bash
# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω (–Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –≤–æ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç–µ)
TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_–∏–∑_localStorage"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤
curl -H "Authorization: Bearer $TOKEN" \
     "https://adx.finance/api/wallet.php?action=balances"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
curl -H "Authorization: Bearer $TOKEN" \
     "https://adx.finance/api/wallet.php?action=transactions&limit=10"
```

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç

```json
{
  "success": true,
  "balances": [
    {
      "currency": "USD",
      "balance": 1000.00,
      "usd_value": 1000.00
    }
  ],
  "total_usd": 1000.00
}
```

### ‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

```json
{
  "success": false,
  "error": "Unauthorized"
}
```

**–†–µ—à–µ–Ω–∏–µ:** –í–æ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω

### ‚ùå –û—à–∏–±–∫–∞ 500 (Internal Server Error)

```json
{
  "success": false,
  "error": "...",
  "version": "2.0.1",
  "details": {...}
}
```

**–†–µ—à–µ–Ω–∏–µ:** 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test_wallet_simple.php` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### ‚ùå HTML –≤–º–µ—Å—Ç–æ JSON

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ HTML —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–º–µ—Å—Ç–æ JSON:
- –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω (404)
- –§–∞—Ç–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ PHP –¥–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ —Å–∞–π—Ç–µ:

```javascript
// –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ API wallet
async function testWalletAPI() {
    const token = localStorage.getItem('auth_token');
    if (!token) {
        console.error('‚ùå –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω. –í–æ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ.');
        return;
    }
    
    console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ API wallet.php...');
    
    // –¢–µ—Å—Ç 1: –ë–∞–ª–∞–Ω—Å—ã
    try {
        const balancesRes = await fetch('/api/wallet.php?action=balances&_t=' + Date.now(), {
            headers: {
                'Authorization': 'Bearer ' + token
            }
        });
        
        const balancesData = await balancesRes.json();
        console.log('‚úÖ –ë–∞–ª–∞–Ω—Å—ã:', balancesData);
        
        if (!balancesData.success) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤:', balancesData.error);
        }
    } catch (err) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –±–∞–ª–∞–Ω—Å–æ–≤:', err);
    }
    
    // –¢–µ—Å—Ç 2: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    try {
        const transRes = await fetch('/api/wallet.php?action=transactions&limit=10&_t=' + Date.now(), {
            headers: {
                'Authorization': 'Bearer ' + token
            }
        });
        
        const transData = await transRes.json();
        console.log('‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:', transData);
        
        if (!transData.success) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:', transData.error);
        }
    } catch (err) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:', err);
    }
}

// –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É
testWalletAPI();
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É wallet.html

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://adx.finance/wallet.html`
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –≤ Network tab
4. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ 500 ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ –≤ API
5. –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ç–æ–∫–µ–Ω–æ–º

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: 500 Internal Server Error

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://adx.finance/test_wallet_simple.php?test=step2`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–∞–π–¥–µ–Ω—ã
3. –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç–µ –ø–∞–ø–∫—É `config/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä
4. –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–∞–π–¥–µ–Ω—ã, –Ω–æ step6 –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–¥–µ

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ `config/` –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –≤ `public_html/config/`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å 644)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞: HTML –≤–º–µ—Å—Ç–æ JSON

**–ü—Ä–∏—á–∏–Ω–∞:** –§–∞—Ç–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞ PHP –¥–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `test_wallet_simple.php` –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è wallet.php (2.0.1)

### –ü—Ä–æ–±–ª–µ–º–∞: Unauthorized

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∏–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
- –í–æ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –µ—Å—Ç—å –≤ localStorage: `localStorage.getItem('auth_token')`
- –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞

## –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã –±—É–¥–µ—Ç–µ –∑–Ω–∞—Ç—å:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ API
- ‚úÖ –ö–∞–∫–∏–µ –æ—à–∏–±–∫–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç
- ‚úÖ –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–∞
